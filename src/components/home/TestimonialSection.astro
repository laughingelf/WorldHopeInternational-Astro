---
const testimonial = {
  heading: "A Life Changed",
  quote:
    "Every gift you give helps bring hope, health, and opportunity to communities in need. Together, we are changing lives and building a brighter future.",
  name: "Bo Prince",
  title: "Executive Director",
  org: "Word Hope International",
  image: {
    src: "/img/ag-img.jpeg",
    alt: "Testimonial image, grateful family",
  },
};
---

<section class="bg-white py-20 px-6 md:px-12">
  <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-10 items-center">
    <!-- Left: Image -->
    <div class="w-full reveal" data-reveal="left">
      <img
        src={testimonial.image.src}
        alt={testimonial.image.alt}
        class="w-full h-auto rounded-md shadow-md object-cover"
        loading="lazy"
      />
    </div>

    <!-- Right: Quote -->
    <div class="text-left reveal" data-reveal="right" style="--reveal-delay: 120ms;">
      <h3 class="text-3xl font-bold text-green-900 mb-4">
        {testimonial.heading}
      </h3>

      <p class="text-green-800 text-lg italic mb-6 leading-relaxed">
        “{testimonial.quote}”
      </p>

      <p class="text-green-700 font-semibold">
        {testimonial.name}, {testimonial.title}, {testimonial.org}
      </p>
    </div>
  </div>
</section>

<script>
  const prefersReduced = window.matchMedia("(prefers-reduced-motion: reduce)").matches;

  const els = document.querySelectorAll(".reveal");
  if (!prefersReduced) {
    const io = new IntersectionObserver(
      (entries) => {
        entries.forEach((e) => {
          if (e.isIntersecting) {
            e.target.classList.add("is-visible");
            io.unobserve(e.target);
          }
        });
      },
      { threshold: 0.2 }
    );
    els.forEach((el) => io.observe(el));
  } else {
    els.forEach((el) => el.classList.add("is-visible"));
  }
</script>

<style>
  .reveal {
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 600ms ease, transform 600ms ease;
    transition-delay: var(--reveal-delay, 0ms);
  }

  .reveal[data-reveal="left"] {
    transform: translateX(-40px);
  }

  .reveal[data-reveal="right"] {
    transform: translateX(40px);
  }

  .reveal.is-visible {
    opacity: 1;
    transform: translate(0, 0);
  }

  @media (prefers-reduced-motion: reduce) {
    .reveal {
      opacity: 1 !important;
      transform: none !important;
      transition: none !important;
    }
  }
</style>
